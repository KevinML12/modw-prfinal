{"version":3,"file":"cart.store-DLR5LjFl.js","sources":["../../../.svelte-kit/adapter-node/chunks/cart.store.js"],"sourcesContent":["import { w as writable } from \"./index.js\";\nfunction createCart() {\n  const initialState = {\n    items: [],\n    subtotal: 0,\n    total: 0,\n    itemCount: 0\n  };\n  const { subscribe, set, update } = writable(initialState);\n  function calculateTotals(items) {\n    const subtotal = items.reduce((sum, item) => sum + item.price * item.quantity, 0);\n    const itemCount = items.reduce((sum, item) => sum + item.quantity, 0);\n    return {\n      items,\n      subtotal,\n      total: subtotal,\n      // El total se actualiza en checkout con envío\n      itemCount\n    };\n  }\n  return {\n    subscribe,\n    // 2. Método para añadir un producto\n    addProduct: (product) => {\n      update((state) => {\n        const existingItem = state.items.find((item) => item.id === product.id);\n        let newItems;\n        if (existingItem) {\n          newItems = state.items.map(\n            (item) => item.id === product.id ? { ...item, quantity: item.quantity + 1 } : item\n          );\n        } else {\n          newItems = [...state.items, { ...product, quantity: 1 }];\n        }\n        return calculateTotals(newItems);\n      });\n    },\n    // 3. Método para quitar un producto\n    removeProduct: (id) => {\n      update((state) => {\n        const newItems = state.items.filter((item) => item.id !== id);\n        return calculateTotals(newItems);\n      });\n    },\n    // 4. Método para actualizar cantidad de un producto\n    updateQuantity: (id, quantity) => {\n      update((state) => {\n        const newItems = state.items.map(\n          (item) => item.id === id ? { ...item, quantity: Math.max(1, quantity) } : item\n        );\n        return calculateTotals(newItems);\n      });\n    },\n    // 5. Método para vaciar el carrito\n    clear: () => {\n      set(initialState);\n    },\n    // 6. Método para obtener el estado actual (síncrono)\n    getCart: () => {\n      let currentCart;\n      const unsubscribe = subscribe((value) => {\n        currentCart = value;\n      });\n      unsubscribe();\n      return currentCart;\n    }\n  };\n}\nconst cart = createCart();\nexport {\n  cart as c\n};\n"],"names":[],"mappings":"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"}