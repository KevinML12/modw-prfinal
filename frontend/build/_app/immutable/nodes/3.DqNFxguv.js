import{S as it,i as dt,s as ut,n as ze,d as u,a as ne,b as e,c as d,h as ct,e as g,f as s,g as b,j as H,k as y,l as n,m as ft,r as pt,o as U,p as lt,q as at,t as ht,u as C,v as w}from"../chunks/BLzuDzTN.js";import{e as st,u as vt,d as mt}from"../chunks/DD-Pidvo.js";import"../chunks/IHki7fMi.js";import{b as ot,c as bt}from"../chunks/Dxf3pmbq.js";function nt(r,l,t){const a=r.slice();return a[9]=l[t],a}function _t(r){let l,t,a,p="Resumen de tu Orden",I,_,c=[],x=new Map,v,o,f,h,D="Subtotal:",O,V,E=r[6](r[2])+"",M,Z,S,R,ve,Fe=r[5].nationalProvider+"",me,be,_e,ee,te=r[6](r[1])+"",re,ge,j,Q,Oe="Total:",ye,le,ae=r[6](r[4])+"",oe,xe,A,B,Re="Información de Envío",Ce,k,J,Be='<label for="name" class="mb-1 block text-sm font-medium">Nombre Completo</label> <input type="text" id="name" class="w-full rounded-md border-gray-300 p-2 shadow-sm focus:border-blue-500 focus:ring-blue-500" required=""/>',we,K,Ge='<label for="address" class="mb-1 block text-sm font-medium">Dirección Completa</label> <input type="text" id="address" class="w-full rounded-md border-gray-300 p-2 shadow-sm focus:border-blue-500 focus:ring-blue-500" required=""/>',Ee,N,z,Ue="Municipio",ke,q,Ie,L,De,Ze=r[6](r[5].costs.local)+"",Te,Ve,Qe=r[5].localZones.join(", ")+"",qe,Pe,He,W,Je='<label for="phone" class="mb-1 block text-sm font-medium">Teléfono</label> <input type="tel" id="phone" class="w-full rounded-md border-gray-300 p-2 shadow-sm focus:border-blue-500 focus:ring-blue-500" required=""/>',Me,G,Ke='<span class="text-gray-600">(Aquí iría el Componente de Pago Seguro)</span>',Le,F,Ne,se=r[6](r[4])+"",ie,Se,We,de=st(r[3]);const Xe=i=>i[9].id;for(let i=0;i<de.length;i+=1){let m=nt(r,de,i),T=Xe(m);x.set(T,c[i]=rt(T,m))}return{c(){l=n("div"),t=n("div"),a=n("h2"),a.textContent=p,I=y(),_=n("div");for(let i=0;i<c.length;i+=1)c[i].c();v=y(),o=n("div"),f=n("div"),h=n("span"),h.textContent=D,O=y(),V=n("span"),M=w(E),Z=y(),S=n("div"),R=n("span"),ve=w("Envío ("),me=w(Fe),be=w("):"),_e=y(),ee=n("span"),re=w(te),ge=y(),j=n("div"),Q=n("span"),Q.textContent=Oe,ye=y(),le=n("span"),oe=w(ae),xe=y(),A=n("div"),B=n("h2"),B.textContent=Re,Ce=y(),k=n("form"),J=n("div"),J.innerHTML=Be,we=y(),K=n("div"),K.innerHTML=Ge,Ee=y(),N=n("div"),z=n("label"),z.textContent=Ue,ke=y(),q=n("input"),Ie=y(),L=n("p"),De=w("Costo local ("),Te=w(Ze),Ve=w(`) aplica\r
                para:\r
                `),qe=w(Qe),Pe=w("."),He=y(),W=n("div"),W.innerHTML=Je,Me=y(),G=n("div"),G.innerHTML=Ke,Le=y(),F=n("button"),Ne=w("Pagar "),ie=w(se),this.h()},l(i){l=s(i,"DIV",{class:!0});var m=b(l);t=s(m,"DIV",{class:!0});var T=b(t);a=s(T,"H2",{class:!0,"data-svelte-h":!0}),H(a)!=="svelte-v6qemj"&&(a.textContent=p),I=g(T),_=s(T,"DIV",{class:!0});var Ye=b(_);for(let Ae=0;Ae<c.length;Ae+=1)c[Ae].l(Ye);Ye.forEach(u),v=g(T),o=s(T,"DIV",{class:!0});var X=b(o);f=s(X,"DIV",{class:!0});var ue=b(f);h=s(ue,"SPAN",{"data-svelte-h":!0}),H(h)!=="svelte-1ytwh2c"&&(h.textContent=D),O=g(ue),V=s(ue,"SPAN",{});var $e=b(V);M=C($e,E),$e.forEach(u),ue.forEach(u),Z=g(X),S=s(X,"DIV",{class:!0});var ce=b(S);R=s(ce,"SPAN",{});var fe=b(R);ve=C(fe,"Envío ("),me=C(fe,Fe),be=C(fe,"):"),fe.forEach(u),_e=g(ce),ee=s(ce,"SPAN",{});var et=b(ee);re=C(et,te),et.forEach(u),ce.forEach(u),ge=g(X),j=s(X,"DIV",{class:!0});var pe=b(j);Q=s(pe,"SPAN",{"data-svelte-h":!0}),H(Q)!=="svelte-ukqv8i"&&(Q.textContent=Oe),ye=g(pe),le=s(pe,"SPAN",{});var tt=b(le);oe=C(tt,ae),tt.forEach(u),pe.forEach(u),X.forEach(u),T.forEach(u),xe=g(m),A=s(m,"DIV",{class:!0});var he=b(A);B=s(he,"H2",{class:!0,"data-svelte-h":!0}),H(B)!=="svelte-1u3e68z"&&(B.textContent=Re),Ce=g(he),k=s(he,"FORM",{class:!0});var P=b(k);J=s(P,"DIV",{"data-svelte-h":!0}),H(J)!=="svelte-1b25qq"&&(J.innerHTML=Be),we=g(P),K=s(P,"DIV",{"data-svelte-h":!0}),H(K)!=="svelte-1g3l5fj"&&(K.innerHTML=Ge),Ee=g(P),N=s(P,"DIV",{});var Y=b(N);z=s(Y,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),H(z)!=="svelte-y33f1z"&&(z.textContent=Ue),ke=g(Y),q=s(Y,"INPUT",{type:!0,id:!0,class:!0,placeholder:!0}),Ie=g(Y),L=s(Y,"P",{class:!0});var $=b(L);De=C($,"Costo local ("),Te=C($,Ze),Ve=C($,`) aplica\r
                para:\r
                `),qe=C($,Qe),Pe=C($,"."),$.forEach(u),Y.forEach(u),He=g(P),W=s(P,"DIV",{"data-svelte-h":!0}),H(W)!=="svelte-11lqxbs"&&(W.innerHTML=Je),Me=g(P),G=s(P,"DIV",{class:!0,"data-svelte-h":!0}),H(G)!=="svelte-xljpck"&&(G.innerHTML=Ke),Le=g(P),F=s(P,"BUTTON",{type:!0,class:!0});var je=b(F);Ne=C(je,"Pagar "),ie=C(je,se),je.forEach(u),P.forEach(u),he.forEach(u),m.forEach(u),this.h()},h(){d(a,"class","font-headings mb-4 text-2xl"),d(_,"class","mb-4 space-y-3 border-b pb-4"),d(f,"class","flex justify-between"),d(S,"class","flex justify-between"),d(j,"class","font-headings text-text flex justify-between border-t pt-2 text-xl font-bold"),d(o,"class","space-y-2"),d(t,"class","rounded-lg border border-gray-200 bg-white p-6 shadow-sm"),d(B,"class","font-headings mb-4 text-2xl"),d(z,"for","municipality"),d(z,"class","mb-1 block text-sm font-medium"),d(q,"type","text"),d(q,"id","municipality"),d(q,"class","w-full rounded-md border-gray-300 p-2 shadow-sm focus:border-blue-500 focus:ring-blue-500"),d(q,"placeholder","Ej: Huehuetenango"),q.required=!0,d(L,"class","mt-1 text-xs text-gray-500"),d(G,"class","rounded border border-dashed border-gray-400 bg-gray-50 p-4 text-center"),d(F,"type","submit"),d(F,"class","font-headings bg-primary w-full rounded-md px-4 py-3 text-lg font-semibold text-white transition-colors duration-300 hover:bg-secondary focus:bg-secondary"),d(k,"class","space-y-4"),d(A,"class","rounded-lg border border-gray-200 bg-white p-6 shadow-sm"),d(l,"class","font-body grid grid-cols-1 gap-8 md:grid-cols-2")},m(i,m){ne(i,l,m),e(l,t),e(t,a),e(t,I),e(t,_);for(let T=0;T<c.length;T+=1)c[T]&&c[T].m(_,null);e(t,v),e(t,o),e(o,f),e(f,h),e(f,O),e(f,V),e(V,M),e(o,Z),e(o,S),e(S,R),e(R,ve),e(R,me),e(R,be),e(S,_e),e(S,ee),e(ee,re),e(o,ge),e(o,j),e(j,Q),e(j,ye),e(j,le),e(le,oe),e(l,xe),e(l,A),e(A,B),e(A,Ce),e(A,k),e(k,J),e(k,we),e(k,K),e(k,Ee),e(k,N),e(N,z),e(N,ke),e(N,q),lt(q,r[0]),e(N,Ie),e(N,L),e(L,De),e(L,Te),e(L,Ve),e(L,qe),e(L,Pe),e(k,He),e(k,W),e(k,Me),e(k,G),e(k,Le),e(k,F),e(F,Ne),e(F,ie),Se||(We=[at(q,"input",r[8]),at(k,"submit",ht(r[7]))],Se=!0)},p(i,m){m&72&&(de=st(i[3]),c=vt(c,m,Xe,1,i,de,x,_,mt,rt,null,nt)),m&4&&E!==(E=i[6](i[2])+"")&&U(M,E),m&2&&te!==(te=i[6](i[1])+"")&&U(re,te),m&16&&ae!==(ae=i[6](i[4])+"")&&U(oe,ae),m&1&&q.value!==i[0]&&lt(q,i[0]),m&16&&se!==(se=i[6](i[4])+"")&&U(ie,se)},d(i){i&&u(l);for(let m=0;m<c.length;m+=1)c[m].d();Se=!1,pt(We)}}}function gt(r){let l,t='<p class="text-xl text-gray-700">Tu carrito está vacío.</p> <a href="/" class="bg-primary mt-4 inline-block rounded-md px-6 py-2 text-white hover:bg-secondary focus:bg-secondary">Volver a la tienda</a>';return{c(){l=n("div"),l.innerHTML=t,this.h()},l(a){l=s(a,"DIV",{class:!0,"data-svelte-h":!0}),H(l)!=="svelte-88xywg"&&(l.innerHTML=t),this.h()},h(){d(l,"class","font-body rounded-lg border border-gray-200 bg-white p-8 text-center shadow-sm")},m(a,p){ne(a,l,p)},p:ze,d(a){a&&u(l)}}}function rt(r,l){let t,a,p=l[9].name+"",I,_,c=l[9].quantity+"",x,v,o,f,h=l[6](l[9].price*l[9].quantity)+"",D,O;return{key:r,first:null,c(){t=n("div"),a=n("span"),I=w(p),_=w(" (x"),x=w(c),v=w(")"),o=y(),f=n("span"),D=w(h),O=y(),this.h()},l(V){t=s(V,"DIV",{class:!0});var E=b(t);a=s(E,"SPAN",{});var M=b(a);I=C(M,p),_=C(M," (x"),x=C(M,c),v=C(M,")"),M.forEach(u),o=g(E),f=s(E,"SPAN",{class:!0});var Z=b(f);D=C(Z,h),Z.forEach(u),O=g(E),E.forEach(u),this.h()},h(){d(f,"class","font-medium"),d(t,"class","flex justify-between"),this.first=t},m(V,E){ne(V,t,E),e(t,a),e(a,I),e(a,_),e(a,x),e(a,v),e(t,o),e(t,f),e(f,D),e(t,O)},p(V,E){l=V,E&8&&p!==(p=l[9].name+"")&&U(I,p),E&8&&c!==(c=l[9].quantity+"")&&U(x,c),E&8&&h!==(h=l[6](l[9].price*l[9].quantity)+"")&&U(D,h)},d(V){V&&u(t)}}}function yt(r){let l,t,a,p,I="Finalizar Compra",_;document.title="Finalizar Compra | "+ot.identity.name;function c(o,f){return o[3].length===0?gt:_t}let x=c(r),v=x(r);return{c(){l=y(),t=n("div"),a=n("div"),p=n("h1"),p.textContent=I,_=y(),v.c(),this.h()},l(o){ct("svelte-zv37gt",document.head).forEach(u),l=g(o),t=s(o,"DIV",{class:!0});var h=b(t);a=s(h,"DIV",{class:!0});var D=b(a);p=s(D,"H1",{class:!0,"data-svelte-h":!0}),H(p)!=="svelte-1g8isny"&&(p.textContent=I),_=g(D),v.l(D),D.forEach(u),h.forEach(u),this.h()},h(){d(p,"class","font-headings text-text mb-8 text-center text-4xl"),d(a,"class","w-full max-w-4xl"),d(t,"class","bg-background flex min-h-screen justify-center p-4 md:p-8")},m(o,f){ne(o,l,f),ne(o,t,f),e(t,a),e(a,p),e(a,_),v.m(a,null)},p(o,[f]){x===(x=c(o))&&v?v.p(o,f):(v.d(1),v=x(o),v&&(v.c(),v.m(a,null)))},i:ze,o:ze,d(o){o&&(u(l),u(t)),v.d()}}}function xt(r,l,t){let a,p,I,_;ft(r,bt,h=>t(3,_=h));const c=ot.businessRules.shipping;let x="";const v=h=>new Intl.NumberFormat("es-GT",{style:"currency",currency:"GTQ"}).format(h);function o(){console.log("Orden a procesar:",{items:_,shipping:{municipality:x,cost:p},total:I}),alert("¡Procesando pago! (simulación)")}function f(){x=this.value,t(0,x)}return r.$$.update=()=>{r.$$.dirty&8&&t(2,a=_.reduce((h,D)=>h+D.price*D.quantity,0)),r.$$.dirty&1&&t(1,p=(()=>{const h=x.toLowerCase().trim();return c.localZones.includes(h)?c.costs.local:c.costs.national})()),r.$$.dirty&6&&t(4,I=a+p)},[x,p,a,_,I,c,v,o,f]}class It extends it{constructor(l){super(),dt(this,l,xt,yt,ut,{})}}export{It as component};
